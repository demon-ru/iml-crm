<?xml version="1.0"?>
<openerp>
    <data>
    
	<!-- changed by Alex -->
	<!-- need to clean up all unnecessery tags and keep only search related tags -->
       <record id="view_res_partner_filter_iml_crm1" model="ir.ui.view">
            <field name="name">view.res.partner.select.iml.crm.inherited1</field>
            <field name="model">res.partner</field>
	    <field name="inherit_id" ref="base.view_res_partner_filter"/>
            <field name="arch" type="xml">
			   <!-- changed by Alex -->
			   <field name="category_id" position="replace">
		               	 <field name="category_id" string="Tag" filter_domain="['|', ('category_id', 'ilike', self), ('client_in_service', '=','In Service')]"/>
			   </field>
            </field>
        </record>
        
        <record id="view_partners_form_iml_crm1" model="ir.ui.view">
            <field name="name">view.res.partner.form.iml.crm.inherited1</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field eval="18" name="priority"/>
            <field name="arch" type="xml">
                <data>
                	<field name="parent_id" position="replace">
	                	<field name="parent_id"
	                            placeholder="Company"
	                            domain="[('is_company', '=', True), ('id', '!=', id)]" context="{'default_is_company': True}"
	                            />
                    </field>
                	<xpath
                		expr="//group/group" position="replace"> 
                        <group invisible="True">
		                        <label for="type" attrs="{'invisible': [('parent_id','=', False)]}"/>
		                        <div attrs="{'invisible': [('parent_id','=', False)]}" name="div_type">
		                            <field class="oe_inline"
		                                name="type"/>
		                        </div>

		                        <label for="street" string="Address"/>
		                        <div>
		                            <div class="oe_edit_only">
		                                <field name="use_parent_address" class="oe_inline"
		                                       on_change="onchange_address(use_parent_address, parent_id)"
		                                       attrs="{'invisible': ['|', ('is_company', '=', True),('parent_id', '=', False)]}"/>
		                                <label for="use_parent_address" attrs="{'invisible': ['|', ('is_company', '=', True), ('parent_id', '=', False)]}"/>
		                            </div>
		                            <button name="open_parent" type="object" string="(edit company address)" class="oe_link oe_edit_only"
		                                    attrs="{'invisible': ['|',('parent_id','=', False),('use_parent_address','=',False)]}"/>
		                            <field name="street" placeholder="Street..."  attrs="{'readonly': [('use_parent_address','=',True)]}"/>
		                            <field name="street2"  attrs="{'readonly': [('use_parent_address','=',True)]}"/>
		                            <div class="address_format">
		                                <field name="city" placeholder="City" style="width: 40%%" attrs="{'readonly': [('use_parent_address','=',True)]}"/>
		                                <field name="state_id" class="oe_no_button" placeholder="State" style="width: 37%%" options='{"no_open": True}' on_change="onchange_state(state_id)" attrs="{'readonly': [('use_parent_address','=',True)]}"/>
		                                <field name="zip" placeholder="ZIP" style="width: 20%%" attrs="{'readonly': [('use_parent_address','=',True)]}"/>
		                            </div>
		                            <field name="country_id" placeholder="Country" class="oe_no_button" options='{"no_open": True}' attrs="{'readonly': [('use_parent_address','=',True)]}"/>
		                        </div>
                        </group>
                        <group>
		                    <field name="website" widget="url" placeholder="e.g. www.odoo.com"/>
		                </group>
            		</xpath>
                		
					<field name="function" position="after" >
							<field  name="short_name" invisible="True"/>
							<field  name="unk"/>
							<field  name="company_org_type"/>
							<field  name="juridical_name"/>
							<field  name="categoryClient_id"/>
							<field string="Состояние обслуживания клиента" name="client_in_service"/>
					</field>
					<page string="Contacts" position="before">
						<page name='base_info' string= 'Основное'>
							<group>
								<field  name="category_of_goods" />
								<field  name="storage_of_shipping" />
								<field  name="region_of_delivery"/>
								
								<field  name="fio_authorized person_nominative_case" string="ФИО уполномоченного лица, именительный падеж"/>
								<field  name="fio_authorized person_genitive_case" string="ФИО уполномоченного лица, родительный падеж"/>
								
								<field  name="authorized_person_position_nominative_case"/>
								<field  name="authorized_person_position_genetive_case"/>
								<field  name="number_of_powerOfattorney"/>
								<field  name="date_of_powerOfattorney"/>
							</group>
						</page>
					</page>
					<page string="Contacts" position="before">
						<page name='address_info' string= 'Адреса'>
							<group name="juridical_address" String="Юридический адрес">
							<div>
								<div>
									<field  name="juridical_address_city_name" style="width: 25%%" placeholder="City.."/>
									<field  name="juridical_address_index" style="width: 25%%" placeholder="Index.."/>
								</div>
								<field  name="juridical_address_street_name" style="width: 50%%" placeholder="Street"/>
								<div class="address_format">
									<label name="label_house" string="Дом"/>
									<field  name="juridical_address_dom" style="width: 14%%" placeholder="House number"/>
									<label name="label_building" string="Строение"/>
									<field  name="juridical_address_building" style="width: 14%%" placeholder="Building"/>
									<label name="label_office" string="Офис"/>
									<field  name="juridical_address_office" style="width: 13%%" placeholder="Office"/>
								</div>
							</div>
								
							</group>
							<group String="Фактический адрес">
								<div>
									<div>
										<field  name="actual_address_city_name" style="width: 25%%" placeholder="City.."/>
										<field  name="actual_address_index" style="width: 25%%" placeholder="Index.."/>
									</div>
									<field  name="actual_address_street_name" style="width: 50%%" placeholder="Street"/>
									<div class="address_format">
										<label name="label_house" string="Дом"/>
										<field  name="actual_address_dom" style="width: 14%%" placeholder="House number"/>
										<label name="label_building" string="Строение"/>
										<field  name="actual_address_building" style="width: 14%%" placeholder="Building"/>
										<label name="label_office" string="Офис"/>
										<field  name="actual_address_office" style="width: 13%%" placeholder="Office"/>
									</div>
								</div>
                        	</group>
						</page>
					</page>
					<page name='internal_notes' position="before">
						<page name='bank_info' string= 'Банк' invisible="True">
							<group>
								<field  name="account_number" />
								<field  name="BIN"/>
								<field  name="bank_name"/>
								<field  name="correspondent_account_number"/>
							</group>
						</page>
					</page>
					<page name='internal_notes' position='before'>
						<page name="codes" string= "Коды">
							<group>
								<field  name="type_of_counterparty" />
								<field  name="inn"/>
								<field  name="registration_reason_code"/>
								<field  name="date_of_accounting"/>
								<field  name="OGRN_OGRNIP" />
								<field  name="registration_date"/>
								<field  name="OKVED"/>
								<field  name="OKPO"/>
								<field  name="OKATO"/>
							</group>
						</page>
					</page>
                </data>
				<notebook>
				    <page name='crm_iml_import_expot_from_nav' string="Import/Export from NAV" attrs="{'invisible':[('is_company','=',False)]}">
				        <group>
							<field string="Last export date" name="exportDateToNAV"/>
							<field string="customer UIN in NAV" name="NavUIN"/>
							<button name="iml_crm_export_id" string="Export custromer id" type="object"/>
				        </group>
				    </page>
            	</notebook>
            </field>
        </record>
    </data>
</openerp>
